[package]
name = "zenavif"
version = "0.2.0"
edition = "2024"
rust-version = "1.93"
license = "MIT OR Apache-2.0"
description = "Pure Rust AVIF image decoder powered by rav1d"
categories = ["multimedia::images"]
keywords = ["avif", "decoder", "av1", "image", "rav1d"]
repository = "https://github.com/imazen/zenavif"

[dependencies]
# rav1d: C FFI-based decoder for asm feature (fastest)
rav1d = { version = "1.1.0", default-features = false, features = ["bitdepth_8", "bitdepth_16"], optional = true }
# rav1d-safe: 100% safe managed API decoder (default, no c-ffi feature!)
# NOTE: Using default-features = false ensures c-ffi is NOT enabled
rav1d-safe = { path = "../rav1d-safe", default-features = false, features = ["bitdepth_8", "bitdepth_16"], optional = true }
archmage = { version = "0.4.0", features = ["macros"] }
safe_unaligned_simd = "0.2.4"
avif-parse = "1.4.0"
yuv = "0.1.9"
imgref = "1.12.0"
rgb = { version = "0.8.91-alpha.3", default-features = false }
enough = "0.3.1"
thiserror = { version = "2.0", default-features = false }
whereat = "0.1.3"
log = "0.4"

[dev-dependencies]
env_logger = { version = "0.11", default-features = false }
png = "0.18.0"

[features]
default = ["managed"]
# Use hand-written assembly (fastest, uses C FFI)
asm = ["dep:rav1d", "rav1d/asm"]
# Use 100% safe managed API (default - no unsafe code!)
managed = ["dep:rav1d-safe"]

[patch.crates-io]
yuv = { git = "https://github.com/lilith/yuv", branch = "rgb-0.8.91-compat" }
rgb = { git = "https://github.com/imazen/rust-rgb", branch = "fix-backward-compat-gray-types" }
